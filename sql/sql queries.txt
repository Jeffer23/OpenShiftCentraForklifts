create database baseplan;

use baseplan;

CREATE TABLE PRODUCT (
    PRODUCT_ID INT PRIMARY KEY AUTO_INCREMENT,
    PRODUCT_NAME VARCHAR(255),
    PRODUCT_DESCRIPTION VARCHAR(255),
    UNIT_PRICE FLOAT
);


INSERT INTO PRODUCT (PRODUCT_NAME, PRODUCT_DESCRIPTION, UNIT_PRICE) VALUES ("FB10HCA – Mitsubishi 4 wheel", "FB10HCA – Mitsubishi 4 wheel", 2000);
INSERT INTO PRODUCT (PRODUCT_NAME, PRODUCT_DESCRIPTION, UNIT_PRICE)  VALUES ("FB13TCB – Mitsubishi 3 wheel", "FB13TCB – Mitsubishi 3 wheel", 1500);
INSERT INTO PRODUCT (PRODUCT_NAME, PRODUCT_DESCRIPTION, UNIT_PRICE)  VALUES ("FB14CA – Mitsubishi 4 wheel", "FB14CA – Mitsubishi 4 wheel", 2500);
INSERT INTO PRODUCT (PRODUCT_NAME, PRODUCT_DESCRIPTION, UNIT_PRICE)  VALUES ("FB14HCA – Mitsubishi 4 wheel", "FB14HCA – Mitsubishi 4 wheel", 2800);
INSERT INTO PRODUCT (PRODUCT_NAME, PRODUCT_DESCRIPTION, UNIT_PRICE)  VALUES ("FB15CA – Mitsubishi 4 wheel", "FB15CA – Mitsubishi 4 wheel", 3000);


CREATE TABLE USERS (
LAST_NAME VARCHAR(255),
FIRST_NAME VARCHAR(255),
PHONE_NUMBER BIGINT,
EMAIL_ADDRESS VARCHAR(255) PRIMARY KEY, 
USER_ROLE VARCHAR(255),
COMPANY_NAME VARCHAR(255),
ADDRESS VARCHAR(255),
USER_PASSWORD VARCHAR(255)
);

INSERT INTO USERS (LAST_NAME, FIRST_NAME, PHONE_NUMBER, EMAIL_ADDRESS, USER_ROLE, COMPANY_NAME, ADDRESS, USER_PASSWORD) VALUES ("lastnametest","firstnameTest",0123456789,"emailtest@test.com","Admin","Testtechnologies","testaddress","welcome@123");

CREATE TABLE INVOICE(
INVOICE_ID BIGINT PRIMARY KEY AUTO_INCREMENT,
INVOICE_DATE DATE,
DUE_DATE DATE,
SUB_TOTAL FLOAT,
DISCOUNT FLOAT,
SUB_TOTAL_LESS_DISCOUNT FLOAT,
TAX_RATE FLOAT,
TOTAL_TAX FLOAT,
SHIPPING_FEE FLOAT,
BALANCE_DUE FLOAT
);

ALTER TABLE INVOICE AUTO_INCREMENT =4567;

INSERT INTO INVOICE( INVOICE_DATE, DUE_DATE, SUB_TOTAL, DISCOUNT, SUB_TOTAL_LESS_DISCOUNT, TAX_RATE, TOTAL_TAX, SHIPPING_FEE, BALANCE_DUE) VALUES ("2012-12-12","2012-12-12",12,13,10,10,14.5,21,15);


CREATE TABLE PURCHASE_ORDER(
PURCHASE_ORDER_ID BIGINT PRIMARY KEY AUTO_INCREMENT, 
USER_ID VARCHAR(255),
FOREIGN KEY FK_USER_ID(USER_ID)
REFERENCES USERS(EMAIL_ADDRESS),
PRODUCT_ID INT,
FOREIGN KEY FK_PRODUCT_ID(PRODUCT_ID)
REFERENCES PRODUCT(PRODUCT_ID),
INVOICE_ID BIGINT,
FOREIGN KEY FK_INVOICE_NUMBER(INVOICE_ID)
REFERENCES INVOICE(INVOICE_ID),
ORDER_DATE DATE,
ORDER_STATUS VARCHAR(255),
APPROVED_DATE DATE,
BILLING_ADDRESS VARCHAR(255),
SHIPPING_ADDRESS VARCHAR(255),
PURCHASE_TOTAL_AMOUNT FLOAT
);

ALTER TABLE PURCHASE_ORDER AUTO_INCREMENT =20000;


INSERT INTO PURCHASE_ORDER (USER_ID, PRODUCT_ID, INVOICE_ID, ORDER_DATE, ORDER_STATUS, APPROVED_DATE, BILLING_ADDRESS, SHIPPING_ADDRESS, PURCHASE_TOTAL_AMOUNT) VALUES ("emailtest@test.com",1,456766,"2012-12-12","PENDING","2012-12-12","testbilling","testshipping",2.55);

CREATE TABLE PURCHASE_PRODUCT(
PURCHASE_PRODUCT_ID BIGINT PRIMARY KEY AUTO_INCREMENT, 
PRODUCT_ID INT,
FOREIGN KEY FK_PRODUCT_ID(PRODUCT_ID)
REFERENCES PRODUCT(PRODUCT_ID),
QUANTITY INT,
TOTAL_AMOUNT FLOAT
);

INSERT INTO PURCHASE_PRODUCT(PRODUCT_ID, QUANTITY, TOTAL_AMOUNT) VALUES(1,2,2.76);

ALTER TABLE purchase_product ADD PURCHASE_ORDER_ID BIGINT, ADD CONSTRAINT FOREIGN KEY(PURCHASE_ORDER_ID) REFERENCES PURCHASE_ORDER(PURCHASE_ORDER_ID);

ALTER TABLE PURCHASE_ORDER DROP FOREIGN KEY purchase_order_ibfk_2;

ALTER TABLE PURCHASE_ORDER DROP COLUMN PURCHASE_PRODUCT_ID;

alter table purchase_order add column referenceNumber bigint(20);

Alter table purchase_order alter referenceNumber set DEFAULT '0';